{
  "container": {
    "controller": {
      "__default__": {
        "__realization__": "barsup.controller.DictController"
      },
      "Individual": {
        "service": "IndividualService"
      },
      "Automobile": {
        "service": "AutoService"
      },
      "User": {
        "service": "UserService"
      },
      "Role": {
        "service": "RoleService"
      },
      "Author": {
        "service": "AuthorService"
      },
      "Book": {
        "service": "BookService"
      },
      "UserBook": {
        "service": "UserBookService"
      },
      "UserRole": {
        "service": "UserRoleService"
      },
      "PermissionController": {
        "__realization__": "barsup.auth.controller.PermissionController",
        "methods:runtime": "actions"
      },
      "PermissionAction": {
        "__realization__": "barsup.auth.controller.PermissionAction",
        "methods:runtime": "actions"
      },
      "RolePermission": {
        "service": "RolePermissionService"
      },
      "AuthorBook": {
        "service": "AuthorBookService"
      },
      "Authentication": {
        "service": "AuthenticationService",
        "__realization__": "barsup.auth.controller.Authentication"
      },
      "Authorization": {
        "service": "AuthorizationService",
        "__realization__": "barsup.auth.controller.Authorization"
      }
    },
    "session": {
      "default": {
        "__type__": "singleton",
        "__realization__": "barsup.session.PostgreSQLSession",
        "$login": "barsup",
        "$password": "barsup",
        "$database": "barsup"
      }
    },
    "service": {
      "__default__": {
        "__realization__": "barsup.service.Service",
        "session": "default",
        "db_mapper": "default"
      },
      "RolePermissionService": {
        "model": "permission"
      },
      "AuthenticationService": {
        "__realization__": "barsup.auth.service.AuthenticationService",
        "model": "barsup_session",
        "user_model:model": "user"
      },
      "AuthorizationService": {
        "__realization__": "barsup.auth.service.AuthorizationService",
        "model": "user_role",
        "role_model:model": "role",
        "permission_model:model": "permission",

        "$joins":
          {"default": ["user_role_model",
            ["user_id", "==", "id", ["user_model", []]],
            ["role_id", "==", "id", ["role_model", []]],
            ["role_id", "==", "role_id", ["permission_model", []]]
          ],
          "role": ["user_role_model",
            ["role_id", "==", "id", ["role_model", []]]
          ]}
      },
      "UserService": {
        "model": "user"
      },
      "RoleService": {
        "model": "role"
      },
      "UserRoleService": {
        "model": "user_role"
      },
      "BookService": {
        "model": "book"
      },
      "AuthorService": {
        "model": "author"
      },
      "IndividualService": {
        "model": "individual"
      },
      "AutoService": {
        "model": "auto"
      },
      "UserBookService": {
        "model": "user_book"
      },
      "AuthorBookService": {
        "model": "author_book"
      }
    },
    "model": {
      "__default__": {
        "__realization__": "barsup.mapping.get_model",
        "db_mapper": "default"
      },
      "auto": {
        "$name": "auto"
      },
      "individual": {
        "$name": "individual"
      },
      "user": {
        "$name": "user"
      },
      "author": {
        "$name": "author"
      },
      "book": {
        "$name": "book"
      },
      "user_book": {
        "$name": "user_book"
      },
      "author_book": {
        "$name": "author_book"
      },
      "barsup_session": {
        "$name": "barsup_session"
      },
      "role": {
        "$name": "role"
      },
      "permission": {
        "$name": "permission"
      },
      "user_role": {
        "$name": "user_role"
      }
    },
    "db_mapper": {
      "default": {
        "__realization__": "barsup.mapping.DBMapper",
        "__type__": "singleton"
      }
    },
    "api_options": {
      "default": {
        "middleware": [
          "log_errors_to_stderr",
          "access_check",
          "transact",
          "wrap_result"
        ]
      }
    },
    "middleware": {
      "__default__": {"__type__": "static"},
      "log_errors_to_stderr": {
        "__realization__": "barsup.middleware.log_errors_to_stderr"
      },
      "access_check": {
        "__type__": "singleton",
        "__realization__": "barsup.middleware.access_check",

        "authentication:controller": "Authentication"
      },
      "transact": {
        "__type__": "singleton",
        "__realization__": "barsup.middleware.transact",
        "session": "default"
      },
      "wrap_result": {
        "__realization__": "barsup.middleware.wrap_result"
      }
    },
    "runtime": {
      "__default__": {"__type__": "static"},
      "actions": {
        "__realization__": "barsup.runtime.ACTIONS"
      }
    }
  }
}